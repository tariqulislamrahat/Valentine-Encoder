<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Valentine Encoder</title>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>♥</text></svg>">
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Crimson+Pro:wght@300;400;600;700&family=Outfit:wght@300;400;500;600&display=swap" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/lz-string/1.4.4/lz-string.min.js"></script>
    <style>
        :root {
            --burgundy: #8B2635;
            --rose: #D4979C;
            --cream: #FAF7F5;
            --gold: #C9A26F;
            --charcoal: #2A2A2A;
            --shadow: rgba(139, 38, 53, 0.1);
        }
  
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
  
        body {
            font-family: 'Outfit', sans-serif;
            background: linear-gradient(135deg, var(--cream) 0%, #FFF5F0 100%);
            color: var(--charcoal);
            min-height: 100vh;
            overflow-x: hidden;
        }
  
        h1, h2, h3 {
            font-family: 'Crimson Pro', serif;
            font-weight: 600;
        }
  
        @keyframes fadeInUp {
            from { opacity: 0; transform: translateY(30px); }
            to { opacity: 1; transform: translateY(0); }
        }
  
        @keyframes heartbeat {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }
        @keyframes shake {
            0% { transform: translateX(0); }
            10% { transform: translateX(-10px); }
            20% { transform: translateX(10px); }
            30% { transform: translateX(-10px); }
            40% { transform: translateX(10px); }
            50% { transform: translateX(-10px); }
            60% { transform: translateX(10px); }
            70% { transform: translateX(-10px); }
            80% { transform: translateX(10px); }
            90% { transform: translateX(-10px); }
            100% { transform: translateX(0); }
        }
  
        .fade-in { animation: fadeInUp 0.8s ease-out forwards; }
        .delay-1 { animation-delay: 0.1s; }
        .delay-2 { animation-delay: 0.2s; }
        .delay-3 { animation-delay: 0.3s; }
  
        .tab-container {
            background: rgba(139, 38, 53, 0.95);
            border-radius: 16px 16px 0 0;
            overflow: hidden;
        }
  
        .tab-buttons { display: flex; gap: 0; }
  
        .tab-btn {
            flex: 1;
            padding: 18px 24px;
            background: transparent;
            color: rgba(255,255,255,0.7);
            border: none;
            font-family: 'Outfit', sans-serif;
            font-size: 16px;
            font-weight: 400;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            letter-spacing: 0.3px;
        }
  
        .tab-btn:hover { color: white; background: rgba(255,255,255,0.1); }
        .tab-btn.active { color: white; }
        .tab-btn.active::after {
            content: '';
            position: absolute;
            bottom: 0; left: 0; right: 0;
            height: 3px;
            background: var(--rose);
        }
  
        .tab-content { display: none; }
        .tab-content.active { display: block; }
  
        .glass-card {
            background: rgba(255,255,255,0.7);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255,255,255,0.9);
            border-radius: 0 0 24px 24px;
            box-shadow: 0 8px 32px var(--shadow);
        }
  
        textarea {
            font-family: 'Outfit', sans-serif;
            background: rgba(255,255,255,0.9);
            border: 2px solid #91313E;
            border-radius: 8px;
            padding: 16px;
            width: 100%;
            resize: vertical;
            transition: all 0.3s ease;
            color: var(--charcoal);
        }
  
        textarea:focus {
            outline: none;
            border-color: var(--burgundy);
            background: white;
            box-shadow: 0 4px 20px rgba(139,38,53,0.1);
        }
  
        .btn {
            font-family: 'Outfit', sans-serif;
            font-weight: 500;
            padding: 14px 32px;
            border-radius: 12px;
            border: none;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4,0,0.2,1);
            font-size: 15px;
            letter-spacing: 0.3px;
        }
  
        .btn-primary {
            background: linear-gradient(135deg, var(--burgundy) 0%, #A63446 100%);
            color: white;
            box-shadow: 0 4px 16px rgba(139,38,53,0.3);
        }
  
        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 24px rgba(139,38,53,0.4);
        }
  
        .modal-overlay {
            position: fixed;
            inset: 0;
            background: rgba(0,0,0,0.6);
            backdrop-filter: blur(4px);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.3s ease;
            padding: 20px;
        }
  
        .modal-overlay.active {
            opacity: 1;
            pointer-events: all;
        }
  
        .modal-content {
            background: white;
            border-radius: 24px;
            padding: 40px;
            max-width: 500px;
            width: 100%;
            transform: scale(0.9);
            transition: transform 0.3s ease;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
        }
  
        .modal-overlay.active .modal-content {
            transform: scale(1);
        }
  
        .heart-icon {
            display: inline-block;
            color: var(--burgundy);
            animation: heartbeat 1.5s ease-in-out infinite;
        }
  
        ::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }
  
        ::-webkit-scrollbar-track {
            background: rgba(0,0,0,0.05);
            border-radius: 10px;
        }
  
        ::-webkit-scrollbar-thumb {
            background: var(--rose);
            border-radius: 10px;
        }
  
        ::-webkit-scrollbar-thumb:hover {
            background: var(--burgundy);
        }
  
        @media (max-width: 768px) {
            .modal-content { padding: 30px 24px; }
            .tab-btn { padding: 16px 20px; font-size: 15px; }
        }
        .animate-shake {
            animation: shake 0.5s;
        }
        .no-copy {
            user-select: none;
            -moz-user-select: none;
            -webkit-user-select: none;
            -ms-user-select: none;
        }
    </style>
</head>
<body>
    <div class="min-h-screen py-12 px-4 sm:px-6 lg:px-8">
  
        <header class="max-w-4xl mx-auto text-center mb-12 fade-in">
            <div class="mb-6">
                <span class="heart-icon text-6xl">♥</span>
            </div>
            <h1 class="text-4xl sm:text-5xl md:text-6xl lg:text-7xl mb-6" style="color: #000000;">
                Valentine Encoder
            </h1>
            <p class="text-xs sm:text-sm md:text-base text-gray-600 max-w-2xl mx-auto leading-normal">
                Who needs plain text when your messages can say ‘I love you’ a thousand times? Every letter becomes a love note, and your chats have never been this romantic. This Valentine’s Day, transform your messages into a thousand ‘I love yous’.
            </p>
        </header>
  
        <div class="max-w-4xl mx-auto fade-in delay-1">
      
            <div class="tab-container">
                <div class="tab-buttons">
                    <button class="tab-btn active" data-tab="encrypt" onclick="switchTab('encrypt')">Love-ify</button>
                    <button class="tab-btn" data-tab="decrypt" onclick="switchTab('decrypt')">De-Love-ify</button>
                </div>
            </div>
      
            <div class="glass-card p-6 sm:p-8">
          
                <!-- Love-ify Tab -->
                <div id="encryptTab" class="tab-content active">
                    <div class="space-y-4">
                        <div>
                            <label class="block text-sm font-medium mb-2 text-gray-700">Your Message</label>
                            <textarea
                                id="plaintext"
                                rows="5"
                                placeholder="Type your message here..."
                                oninput="encrypt()"
                                class="min-h-[140px]"
                            ></textarea>
                        </div>
                  
                        <div>
                            <div class="flex items-center justify-between mb-2">
                                <label class="block text-sm font-medium text-gray-700">Love-ified Output</label>
                                <div class="flex gap-4">
                                    <button onclick="copyEncrypted()" class="text-sm hover:underline" style="color: var(--burgundy);">
                                        Copy
                                    </button>
                                    <button id="shareBtn" onclick="generateShareableLink()" class="text-sm hover:underline" style="color: var(--burgundy);">
                                        Share
                                    </button>
                                </div>
                            </div>
                            <textarea
                                id="encrypted"
                                rows="7"
                                readonly
                                placeholder="Your love-ified message will appear here..."
                                class="min-h-[180px] bg-gray-50 cursor-text no-copy"
                                oncopy="return false"
                                oncut="return false"
                                oncontextmenu="return false"
                            ></textarea>
                        </div>
                    </div>
                </div>
          
                <!-- De-Love-ify Tab -->
                <div id="decryptTab" class="tab-content">
                    <div class="space-y-4">
                        <div>
                            <label class="block text-sm font-medium mb-2 text-gray-700">Love-ified Message</label>
                            <textarea
                                id="encryptedInput"
                                rows="7"
                                placeholder="Paste love-ified message here..."
                                oninput="attemptDecrypt()"
                                class="min-h-[180px]"
                            ></textarea>
                        </div>
                        <div>
                            <label class="block text-sm font-medium mb-2 text-gray-700">Key</label>
                            <input
                                id="manualKey"
                                type="text"
                                placeholder="Enter key here..."
                                class="w-full p-4 border-2 border-#91313E rounded-lg bg-white focus:border-var(--burgundy) transition-all"
                                oninput="attemptDecrypt()"
                            />
                        </div>
                  
                        <div>
                            <div class="flex items-center justify-between mb-2">
                                <label class="block text-sm font-medium text-gray-700">Original Message</label>
                            </div>
                            <textarea
                                id="decrypted"
                                rows="5"
                                readonly
                                placeholder="De-love-ified (original) message will appear here..."
                                class="min-h-[140px] bg-gray-50 cursor-text no-copy"
                                oncopy="return false"
                                oncut="return false"
                                oncontextmenu="return false"
                            ></textarea>
                        </div>
                    </div>
                </div>
          
            </div>
      
        </div>
  
        <footer class="max-w-4xl mx-auto mt-16 text-center fade-in delay-2">
            <button onclick="showCredits()" class="text-sm text-[#90313E] hover:text-burgundy transition-colors duration-300" style="--burgundy: #8B2635;">
                View Credits
            </button>
            <p class="text-xs text-gray-400 mt-4">
                © 2026 Valentine Encoder
            </p>
        </footer>
  
    </div>
    <!-- Credits Modal -->
    <div id="creditsModal" class="modal-overlay" onclick="closeModal('creditsModal')">
        <div class="modal-content text-center" onclick="event.stopPropagation()">
            <h2 class="text-3xl mb-6" style="color: var(--burgundy); font-family: 'Crimson Pro', serif;">Credits</h2>
            <div class="space-y-4">
                <div class="p-4 bg-gray-50 rounded-xl">
                    <h3 class="font-semibold mb-1" style="color: var(--burgundy);">Tariqul Islam</h3>
                    <p class="text-sm text-gray-600 mb-2">Idea & Concept</p>
                    <a href="https://github.com/tariqulislamrahat" target="_blank" class="text-sm hover:underline" style="color: var(--burgundy);">
                        Visit GitHub
                    </a>
                </div>
          
                <div class="p-4 bg-gray-50 rounded-xl">
                    <h3 class="font-semibold mb-1" style="color: var(--burgundy);">Grok</h3>
                    <p class="text-sm text-gray-600 mb-2">Coding Implementation</p>
                    <a href="https://grok.com/" target="_blank" class="text-sm hover:underline" style="color: var(--burgundy);">
                        Visit Grok
                    </a>
                </div>
          
                <div class="p-4 bg-gray-50 rounded-xl">
                    <h3 class="font-semibold mb-1" style="color: var(--burgundy);">Claude Sonnet 4.5</h3>
                    <p class="text-sm text-gray-600 mb-2">UI Design</p>
                    <a href="https://claude.ai" target="_blank" class="text-sm hover:underline" style="color: var(--burgundy);">
                        Visit Claude
                    </a>
                </div>
            </div>
            <button onclick="closeModal('creditsModal')" class="btn btn-primary w-full mt-6">Close</button>
        </div>
    </div>
    <script>
        let mappings = {};
        try {
            mappings = JSON.parse(localStorage.getItem('valentineMappings') || '{}');
        } catch (e) {}
        let currentShortId = '';
        function simpleHash(str) {
            let hash = 0;
            for (let i = 0; i < str.length; i++) {
                const char = str.charCodeAt(i);
                hash = ((hash << 5) - hash) + char;
                hash = hash & hash;
            }
            return hash >>> 0;
        }
        function generateShortID(text) {
            const words = text.trim().split(/\s+/).filter(w => w);
            let initials = words.map(w => w[0] ? w[0].toUpperCase() : '').join('').slice(0, 2);
            while (initials.length < 2) initials += 'X';
            const lenStr = text.length.toString().padStart(2, '0');
            const hash = simpleHash(text);
            const checkNum = hash % (36 ** 2);
            const checkStr = checkNum.toString(36).toUpperCase().padStart(2, '0');
            return initials + lenStr + checkStr;
        }
        function switchTab(tabName) {
            document.querySelectorAll('.tab-btn').forEach(btn => btn.classList.remove('active'));
            const btn = document.querySelector(`.tab-btn[data-tab="${tabName}"]`);
            if (btn) btn.classList.add('active');
            document.querySelectorAll('.tab-content').forEach(content => content.classList.remove('active'));
            document.getElementById(tabName + 'Tab').classList.add('active');
        }
  
        function charToBinary(char) {
            return char.charCodeAt(0).toString(2).padStart(8, '0');
        }
  
        function binaryToChar(binary) {
            return String.fromCharCode(parseInt(binary, 2));
        }
  
        function encodeBlockToILoveYou(binary8) {
            const letters = ['i','l','o','v','e','y','o','u'];
            let result = '';
      
            for (let i = 0; i < 8; i++) {
                const bit = binary8.charAt(i);
                const letter = letters[i];
                result += (bit === '0') ? letter.toUpperCase() : letter.toLowerCase();
            }
      
            return result.charAt(0) + ' ' + result.substr(1,4) + ' ' + result.substr(5);
        }
  
        function encrypt() {
            const plaintext = document.getElementById('plaintext').value.trim();
            if (!plaintext) {
                document.getElementById('encrypted').value = '';
                return;
            }
            let shortId = Object.keys(mappings).find(key => mappings[key] === plaintext);
            if (!shortId) {
                shortId = generateShortID(plaintext);
                let baseId = shortId;
                let counter = 1;
                while (mappings[shortId] && mappings[shortId] !== plaintext) {
                    shortId = baseId + counter.toString(36).toUpperCase();
                    counter++;
                }
                mappings[shortId] = plaintext;
                localStorage.setItem('valentineMappings', JSON.stringify(mappings));
            }
            currentShortId = shortId;
            const blocks = [];
            for (let char of shortId) {
                const binary = charToBinary(char);
                blocks.push(encodeBlockToILoveYou(binary));
            }
      
            document.getElementById('encrypted').value = blocks.join('\n');
        }
  
        function copyEncrypted() {
            const output = document.getElementById('encrypted').value.trim();
            if (!output) {
                showToast('Nothing to copy!');
                return;
            }
            const toCopy = output + '\n\nKey: ' + currentShortId;
            navigator.clipboard.writeText(toCopy);
            showToast('Love-ified message and key copied!');
        }
  
        function attemptDecrypt() {
            let inputText = document.getElementById('encryptedInput').value;
            const keyMarker = '\n\nKey: ';
            const markerIndex = inputText.lastIndexOf(keyMarker);
            if (markerIndex !== -1) {
                const encodedPart = inputText.substring(0, markerIndex).trim();
                const keyPart = inputText.substring(markerIndex + keyMarker.length).trim();
                document.getElementById('encryptedInput').value = encodedPart;
                document.getElementById('manualKey').value = keyPart;
                inputText = encodedPart;
            }
            const encoded = inputText.trim();
            const enteredKey = document.getElementById('manualKey').value.trim();
            const decryptedElem = document.getElementById('decrypted');
            if (!encoded || !enteredKey) {
                decryptedElem.value = '';
                return;
            }
            try {
                const cased = encoded.replace(/\s/g, '');
                if (cased.length % 8 !== 0) throw new Error('Invalid length');
                const lower = cased.toLowerCase();
                for (let i = 0; i < lower.length; i += 8) {
                    if (lower.substr(i,8) !== 'iloveyou') throw new Error('Invalid pattern');
                }
                let result = '';
                for (let i = 0; i < cased.length; i += 8) {
                    const chunk = cased.substr(i,8);
                    let bin = '';
                    for (let j = 0; j < 8; j++) {
                        bin += (chunk[j] === chunk[j].toUpperCase()) ? '0' : '1';
                    }
                    result += binaryToChar(bin);
                }
                const computedKey = result;
                if (computedKey === enteredKey) {
                    const original = mappings[enteredKey];
                    if (original) {
                        decryptedElem.value = original;
                    } else {
                        decryptedElem.value = 'No message found for this key.';
                    }
                } else {
                    decryptedElem.value = 'Key does not match the encoded message.';
                    decryptedElem.classList.add('animate-shake');
                    setTimeout(() => decryptedElem.classList.remove('animate-shake'), 500);
                }
            } catch (e) {
                decryptedElem.value = 'Invalid encoded message.';
            }
        }
  
        async function generateShareableLink() {
            const plaintext = document.getElementById('plaintext').value.trim();
            if (!plaintext) {
                showToast('Nothing to share!');
                return;
            }
            const output = document.getElementById('encrypted').value.trim();
            if (!output) {
                showToast('Nothing to share!');
                return;
            }
            const compressed_encoded = LZString.compressToEncodedURIComponent(output);
            const compressed_plain = LZString.compressToEncodedURIComponent(plaintext);
            const shareUrl = window.location.origin + window.location.pathname + '#e=' + compressed_encoded + '&m=' + compressed_plain;
            let finalUrl = shareUrl;
            try {
                const response = await fetch('https://tinyurl.com/api-create.php?url=' + encodeURIComponent(shareUrl));
                if (response.ok) {
                    finalUrl = await response.text();
                } else {
                    throw new Error('Failed to shorten');
                }
            } catch (err) {
                console.error('Shortening failed:', err);
            }
            const shareText = finalUrl;
            if (navigator.share) {
                try {
                    await navigator.share({
                        title: 'Valentine Encoder Message',
                        url: finalUrl
                    });
                    showToast('Shared successfully!');
                } catch (shareErr) {
                    console.error('Share failed:', shareErr);
                    navigator.clipboard.writeText(shareText);
                    showToast('Link copied (share failed)');
                }
            } else {
                navigator.clipboard.writeText(shareText);
                showToast(finalUrl === shareUrl ? 'Shareable link copied (shortening failed)' : 'Short link copied!');
            }
        }
  
        function loadFromUrl() {
            const hash = window.location.hash;
            if (!hash) return;
            const params = new URLSearchParams(hash.slice(1));
            const compressed_encoded = params.get('e');
            const compressed_plain = params.get('m');
            if (compressed_encoded && compressed_plain) {
                const encoded = LZString.decompressFromEncodedURIComponent(compressed_encoded);
                const plain = LZString.decompressFromEncodedURIComponent(compressed_plain);
                if (encoded && plain) {
                    try {
                        const cased = encoded.replace(/\s/g, '');
                        if (cased.length % 8 !== 0) throw new Error('Invalid length');
                        const lower = cased.toLowerCase();
                        for (let i = 0; i < lower.length; i += 8) {
                            if (lower.substr(i,8) !== 'iloveyou') throw new Error('Invalid pattern');
                        }
                        let result = '';
                        for (let i = 0; i < cased.length; i += 8) {
                            const chunk = cased.substr(i,8);
                            let bin = '';
                            for (let j = 0; j < 8; j++) {
                                bin += (chunk[j] === chunk[j].toUpperCase()) ? '0' : '1';
                            }
                            result += binaryToChar(bin);
                        }
                        const id = result;
                        mappings[id] = plain;
                        localStorage.setItem('valentineMappings', JSON.stringify(mappings));
                        document.getElementById('encryptedInput').value = encoded;
                        document.getElementById('manualKey').value = id;
                        attemptDecrypt();
                        switchTab('decrypt');
                    } catch (e) {
                        console.error('Failed to process shared link');
                    }
                }
            }
        }
  
        function showCredits() {
            document.getElementById('creditsModal').classList.add('active');
        }
  
        function closeModal(id) {
            document.getElementById(id).classList.remove('active');
        }
  
        function showToast(msg) {
            const t = document.createElement('div');
            t.textContent = msg;
            t.style.cssText = `
                position:fixed; bottom:30px; right:30px;
                background:var(--burgundy); color:white;
                padding:16px 24px; border-radius:12px;
                box-shadow:0 4px 20px rgba(0,0,0,0.2); z-index:10000;
                font-family:'Outfit',sans-serif; font-size:14px;
                animation: fadeInUp 0.3s ease-out;
            `;
            document.body.appendChild(t);
            setTimeout(() => {
                t.style.animation = 'fadeInUp 0.3s ease-out reverse';
                setTimeout(() => t.remove(), 300);
            }, 2000);
        }
  
        document.addEventListener('keydown', e => {
            if (e.key === 'Escape') closeModal('creditsModal');
        });
        document.addEventListener('DOMContentLoaded', loadFromUrl);
    </script>
</body>
</html>
